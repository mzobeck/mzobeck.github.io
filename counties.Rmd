---
title: "US COVID-19 Trends"
author: "By Mark Zobeck, MD, MPH"
output:
  html_document:
    df_print: paged
    toc: TRUE
    toc_float:
      collapsed: TRUE
      smooth_scroll: TRUE
    toc_depth: 3
    fig_width: 10
    fig_height: 7

---

<script async src="https://www.googletagmanager.com/gtag/js?id=UA-78251343-4"></script>

<script>

  window.dataLayer = window.dataLayer || [];

  function gtag(){dataLayer.push(arguments);}

  gtag('js', new Date());



  gtag('config', 'UA-78251343-4');

</script>
```{r setup, include=FALSE}
knitr::opts_chunk$set(message = F)
knitr::opts_chunk$set(warning = F)
knitr::opts_chunk$set(echo=FALSE) 
 
library(tidyverse)
library(readxl)
library(janitor)
library(data.table)
library(lubridate)
library(naniar)
library(knitr)
library(kableExtra)
library(ggdag)
library(randomForest)
library(brms)
library(bayesplot)
library(cowplot)
library(skimr)
library(ggthemes)
library(httr)
library(rjson)
library(jsonlite)
library(RCurl)
library(ggrepel)
```

```{r, include=FALSE}
target.states <- read_csv("initial_files/state_regions.csv") %>% 
  filter(region == "South")

fwrite(target.states, "target_states.csv")
```

```{r, include = FALSE}
source("initializer_counties.R")
source("state_functions.R")
```

# **Metro Areas**

--- 

## **Texas**

Note: that instead of days since 10th case, the `x-axis` is now days since reported 1st case.   

## **Texas Top 10**    
### Cumulative Cases {.tabset .tabset-fade .tabset-pills}  
#### Prevalence 
```{r}
txcounty.top10.all %>% 
  ggplot(aes(since1, value, group = county, color = county)) +
  geom_line(alpha = 0.7, size = 1.5, arrow = arrow(angle = 15, type = "closed", length = unit(0.1, "inches"))) + 
  theme_minimal_hgrid() +
  scale_color_tableau()+ 
  labs(y= "Reported cases", x = "Days since reporting 1st case", color = "County") +
  ggtitle("Cumulative reported cases\nby days since the 1st reported case.")
```


#### Log(New Cases)
```{r}
txcounty.top10.all %>% 
  ggplot(aes(since1, value, group = county, color = county)) +
  geom_line(alpha = 0.7, size = 1.5, arrow = arrow(angle = 15, type = "closed", length = unit(0.1, "inches"))) + 
  theme_minimal_hgrid() +
  scale_color_tableau()+ 
  scale_y_log10()+
  labs(y= "Logarithmic reported cases", x = "Days since reporting 1st case", color = "County") +
  ggtitle("Logarithmic cumulative reported cases\nby days since the 1st reported case.")
```

### Cumulative Deaths {.tabset .tabset-fade .tabset-pills}  
#### Deaths
```{r}
txcounty.deaths.top10.all %>% 
  ggplot(aes(since1, value, group = county, color = county)) +
  geom_line(alpha = 0.7, size = 1.5, arrow = arrow(angle = 15, type = "closed", length = unit(0.1, "inches"))) + 
  theme_minimal_hgrid() +
  scale_color_tableau()+ 
  labs(y= "Reported deaths", x = "Days since reporting 1st case", color = "County") +
  ggtitle("Cumulative reported deaths\nby days since the 1st reported case.")
```


#### Log(Deaths)
```{r}
txcounty.deaths.top10.all %>% 
  ggplot(aes(since1, value, group = county, color = county)) +
  geom_line(alpha = 0.7, size = 1.5, arrow = arrow(angle = 15, type = "closed", length = unit(0.1, "inches"))) + 
  theme_minimal_hgrid() +
  scale_color_tableau()+ 
  scale_y_log10()+
  labs(y= "Logarithmic reported deaths", x = "Days since reporting 1st case", color = "County") +
  ggtitle("Logarithmic cumulative reported deaths\nby days since the 1st reported case.")
```


## **Austin Metro**    
  
### Cumulative Cases {.tabset .tabset-fade .tabset-pills}    
#### Prevalence 
```{r}
metro.area <- austin.metro
metro.cases <- tx.county.cases %>% 
  filter(county %in% metro.area) 

metro.cases %>% 
  ggplot(aes(since1, value, group = county, color = county)) +
  geom_line(data = txcounty.top10.all, aes(since1, value), color = "grey", alpha = 0.8, arrow = arrow(angle = 15, type = "closed", length = unit(0.08, "inches"))) + 
  geom_line(alpha = 0.7, size = 1.5, arrow = arrow(angle = 15, type = "closed", length = unit(0.1, "inches"))) + 
  theme_minimal_hgrid() +
  scale_color_tableau() +
  labs(y= "Reported cases", x = "Days since reporting 1st case", color = "County", caption = "\nGrey arrows represent the top 10 Texas counties by reported prevalence.") +
  ggtitle("Cumulative reported cases\nby days since the 1st reported case.")
```


#### Log(Prevalence)
```{r}
metro.cases %>% 
  ggplot(aes(since1, value, group = county, color = county)) +
  geom_line(data = txcounty.top10.all, aes(since1, value), color = "grey", alpha = 0.5, arrow = arrow(angle = 15, type = "closed", length = unit(0.08, "inches"))) + 
  geom_line(alpha = 0.7, size = 1.5, arrow = arrow(angle = 15, type = "closed", length = unit(0.1, "inches"))) + 
  theme_minimal_hgrid() +
  scale_color_tableau() +
  scale_y_log10() + 
  labs(y= "Logarithmic reported cases", x = "Days since reporting 1st case", color = "County", caption = "\nGrey arrows represent the top 10 Texas counties by reported prevalence.") +
  ggtitle("Logarithmic cumulative reported cases\nby days since the 1st reported case.")
```


### Cumulative Deaths {.tabset .tabset-fade .tabset-pills}  
#### Deaths
```{r}
metro.deaths <- tx.county.deaths %>% 
  filter(county %in% metro.area) 

metro.deaths %>% 
  ggplot(aes(since1, value, group = county, color = county)) +
  geom_line(data = txcounty.deaths.top10.all, aes(since1, value), color = "grey", alpha = 0.8, arrow = arrow(angle = 15, type = "closed", length = unit(0.08, "inches"))) + 
  geom_line(alpha = 0.7, size = 1.5, arrow = arrow(angle = 15, type = "closed", length = unit(0.1, "inches"))) + 
  theme_minimal_hgrid() +
  scale_color_tableau() +
  labs(y= "Reported deaths", x = "Days since reporting 1st case", color = "County", caption = "\nGrey arrows represent the top 10 Texas counties by reported prevalence.") +
  ggtitle("Cumulative reported deaths\nby days since the 1st reported case.")
```


#### Log(Prevalence)
```{r}
metro.deaths %>% 
  ggplot(aes(since1, value, group = county, color = county)) +
  geom_line(data = txcounty.deaths.top10.all, aes(since1, value), color = "grey", alpha = 0.5, arrow = arrow(angle = 15, type = "closed", length = unit(0.08, "inches"))) + 
  geom_line(alpha = 0.7, size = 1.5, arrow = arrow(angle = 15, type = "closed", length = unit(0.1, "inches"))) + 
  theme_minimal_hgrid() +
  scale_color_tableau() +
  scale_y_log10() + 
  labs(y= "Logarithmic reported deaths", x = "Days since reporting 1st case", color = "County", caption = "\nGrey arrows represent the top 10 Texas counties by reported prevalence.") +
  ggtitle("Logarithmic cumulative reported deaths\nby days since the 1st reported case.")
```


## **Dallas-Fort Worth Metro**    
  
### Cumulative Cases {.tabset .tabset-fade .tabset-pills}    
#### Prevalence 
```{r}
metro.area <- dfw.metro
metro.cases <- tx.county.cases %>% 
  filter(county %in% metro.area) 

metro.cases %>% 
  ggplot(aes(since1, value, group = county, color = county)) +
  geom_line(data = txcounty.top10.all, aes(since1, value), color = "grey", alpha = 0.8, arrow = arrow(angle = 15, type = "closed", length = unit(0.08, "inches"))) + 
  geom_line(alpha = 0.7, size = 1.5, arrow = arrow(angle = 15, type = "closed", length = unit(0.1, "inches"))) + 
  theme_minimal_hgrid() +
  scale_color_stata() +
  labs(y= "Reported cases", x = "Days since reporting 1st case", color = "County", caption = "\nGrey arrows represent the top 10 Texas counties by reported prevalence.") +
  ggtitle("Cumulative reported cases\nby days since the 1st reported case.")
```


#### Log(Prevalence)
```{r}
metro.cases %>% 
  ggplot(aes(since1, value, group = county, color = county)) +
  geom_line(data = txcounty.top10.all, aes(since1, value), color = "grey", alpha = 0.5, arrow = arrow(angle = 15, type = "closed", length = unit(0.08, "inches"))) + 
  geom_line(alpha = 0.7, size = 1.5, arrow = arrow(angle = 15, type = "closed", length = unit(0.1, "inches"))) + 
  theme_minimal_hgrid() +
  scale_color_stata() +
  scale_y_log10() + 
  labs(y= "Logarithmic reported cases", x = "Days since reporting 1st case", color = "County", caption = "\nGrey arrows represent the top 10 Texas counties by reported prevalence.") +
  ggtitle("Logarithmic cumulative reported cases\nby days since the 1st reported case.")
```


### Cumulative Deaths {.tabset .tabset-fade .tabset-pills}  
#### Deaths
```{r}
metro.deaths <- tx.county.deaths %>% 
  filter(county %in% metro.area) 

metro.deaths %>% 
  ggplot(aes(since1, value, group = county, color = county)) +
  geom_line(data = txcounty.deaths.top10.all, aes(since1, value), color = "grey", alpha = 0.8, arrow = arrow(angle = 15, type = "closed", length = unit(0.08, "inches"))) + 
  geom_line(alpha = 0.7, size = 1.5, arrow = arrow(angle = 15, type = "closed", length = unit(0.1, "inches"))) + 
  theme_minimal_hgrid() +
  scale_color_tableau() +
  labs(y= "Reported deaths", x = "Days since reporting 1st case", color = "County", caption = "\nGrey arrows represent the top 10 Texas counties by reported prevalence.") +
  ggtitle("Cumulative reported deaths\nby days since the 1st reported case.")
```


#### Log(Prevalence)
```{r}
metro.deaths %>% 
  ggplot(aes(since1, value, group = county, color = county)) +
  geom_line(data = txcounty.deaths.top10.all, aes(since1, value), color = "grey", alpha = 0.5, arrow = arrow(angle = 15, type = "closed", length = unit(0.08, "inches"))) + 
  geom_line(alpha = 0.7, size = 1.5, arrow = arrow(angle = 15, type = "closed", length = unit(0.1, "inches"))) + 
  theme_minimal_hgrid() +
  scale_color_tableau() +
  scale_y_log10() + 
  labs(y= "Logarithmic reported deaths", x = "Days since reporting 1st case", color = "County", caption = "\nGrey arrows represent the top 10 Texas counties by reported prevalence.") +
  ggtitle("Logarithmic cumulative reported deaths\nby days since the 1st reported case.")
```


## **Houston Metro**    
  
### Cumulative Cases {.tabset .tabset-fade .tabset-pills}    
#### Prevalence 
```{r}
metro.area <- houston.metro
metro.cases <- tx.county.cases %>% 
  filter(county %in% metro.area) 

metro.cases %>% 
  ggplot(aes(since1, value, group = county, color = county)) +
  geom_line(data = txcounty.top10.all, aes(since1, value), color = "grey", alpha = 0.8, arrow = arrow(angle = 15, type = "closed", length = unit(0.08, "inches"))) + 
  geom_line(alpha = 0.7, size = 1.5, arrow = arrow(angle = 15, type = "closed", length = unit(0.1, "inches"))) + 
  theme_minimal_hgrid() +
  scale_color_tableau() +
  labs(y= "Reported cases", x = "Days since reporting 1st case", color = "County", caption = "\nGrey arrows represent the top 10 Texas counties by reported prevalence.") +
  ggtitle("Cumulative reported cases\nby days since the 1st reported case.")
```


#### Log(Prevalence)
```{r}
metro.cases %>% 
  ggplot(aes(since1, value, group = county, color = county)) +
  geom_line(data = txcounty.top10.all, aes(since1, value), color = "grey", alpha = 0.5, arrow = arrow(angle = 15, type = "closed", length = unit(0.08, "inches"))) + 
  geom_line(alpha = 0.7, size = 1.5, arrow = arrow(angle = 15, type = "closed", length = unit(0.1, "inches"))) + 
  theme_minimal_hgrid() +
  scale_color_tableau() +
  scale_y_log10() + 
  labs(y= "Logarithmic reported cases", x = "Days since reporting 1st case", color = "County", caption = "\nGrey arrows represent the top 10 Texas counties by reported prevalence.") +
  ggtitle("Logarithmic cumulative reported cases\nby days since the 1st reported case.")
```


### Cumulative Deaths {.tabset .tabset-fade .tabset-pills}  
#### Deaths
```{r}
metro.deaths <- tx.county.deaths %>% 
  filter(county %in% metro.area) 

metro.deaths %>% 
  ggplot(aes(since1, value, group = county, color = county)) +
  geom_line(data = txcounty.deaths.top10.all, aes(since1, value), color = "grey", alpha = 0.8, arrow = arrow(angle = 15, type = "closed", length = unit(0.08, "inches"))) + 
  geom_line(alpha = 0.7, size = 1.5, arrow = arrow(angle = 15, type = "closed", length = unit(0.1, "inches"))) + 
  theme_minimal_hgrid() +
  scale_color_tableau() +
  labs(y= "Reported deaths", x = "Days since reporting 1st case", color = "County", caption = "\nGrey arrows represent the top 10 Texas counties by reported prevalence.") +
  ggtitle("Cumulative reported deaths\nby days since the 1st reported case.")
```


#### Log(Prevalence)
```{r}
metro.deaths %>% 
  ggplot(aes(since1, value, group = county, color = county)) +
  geom_line(data = txcounty.deaths.top10.all, aes(since1, value), color = "grey", alpha = 0.5, arrow = arrow(angle = 15, type = "closed", length = unit(0.08, "inches"))) + 
  geom_line(alpha = 0.7, size = 1.5, arrow = arrow(angle = 15, type = "closed", length = unit(0.1, "inches"))) + 
  theme_minimal_hgrid() +
  scale_color_tableau() +
  scale_y_log10() + 
  labs(y= "Logarithmic reported deaths", x = "Days since reporting 1st case", color = "County", caption = "\nGrey arrows represent the top 10 Texas counties by reported prevalence.") +
  ggtitle("Logarithmic cumulative reported deaths\nby days since the 1st reported case.")
```


## **San Antonio Metro**    
  
### Cumulative Cases {.tabset .tabset-fade .tabset-pills}    
#### Prevalence 
```{r}
metro.area <- san.antonio.metro
metro.cases <- tx.county.cases %>% 
  filter(county %in% metro.area) 

metro.cases %>% 
  ggplot(aes(since1, value, group = county, color = county)) +
  geom_line(data = txcounty.top10.all, aes(since1, value), color = "grey", alpha = 0.8, arrow = arrow(angle = 15, type = "closed", length = unit(0.08, "inches"))) + 
  geom_line(alpha = 0.7, size = 1.5, arrow = arrow(angle = 15, type = "closed", length = unit(0.1, "inches"))) + 
  theme_minimal_hgrid() +
  scale_color_tableau() +
  labs(y= "Reported cases", x = "Days since reporting 1st case", color = "County", caption = "\nGrey arrows represent the top 10 Texas counties by reported prevalence.") +
  ggtitle("Cumulative reported cases\nby days since the 1st reported case.")
```


#### Log(Prevalence)
```{r}
metro.cases %>% 
  ggplot(aes(since1, value, group = county, color = county)) +
  geom_line(data = txcounty.top10.all, aes(since1, value), color = "grey", alpha = 0.5, arrow = arrow(angle = 15, type = "closed", length = unit(0.08, "inches"))) + 
  geom_line(alpha = 0.7, size = 1.5, arrow = arrow(angle = 15, type = "closed", length = unit(0.1, "inches"))) + 
  theme_minimal_hgrid() +
  scale_color_tableau() +
  scale_y_log10() + 
  labs(y= "Logarithmic reported cases", x = "Days since reporting 1st case", color = "County", caption = "\nGrey arrows represent the top 10 Texas counties by reported prevalence.") +
  ggtitle("Logarithmic cumulative reported cases\nby days since the 1st reported case.")
```


### Cumulative Deaths {.tabset .tabset-fade .tabset-pills}  
#### Deaths
```{r}
metro.deaths <- tx.county.deaths %>% 
  filter(county %in% metro.area) 

metro.deaths %>% 
  ggplot(aes(since1, value, group = county, color = county)) +
  geom_line(data = txcounty.deaths.top10.all, aes(since1, value), color = "grey", alpha = 0.8, arrow = arrow(angle = 15, type = "closed", length = unit(0.08, "inches"))) + 
  geom_line(alpha = 0.7, size = 1.5, arrow = arrow(angle = 15, type = "closed", length = unit(0.1, "inches"))) + 
  theme_minimal_hgrid() +
  scale_color_tableau() +
  labs(y= "Reported deaths", x = "Days since reporting 1st case", color = "County", caption = "\nGrey arrows represent the top 10 Texas counties by reported prevalence.") +
  ggtitle("Cumulative reported deaths\nby days since the 1st reported case.")
```


#### Log(Prevalence)
```{r}
metro.deaths %>% 
  ggplot(aes(since1, value, group = county, color = county)) +
  geom_line(data = txcounty.deaths.top10.all, aes(since1, value), color = "grey", alpha = 0.5, arrow = arrow(angle = 15, type = "closed", length = unit(0.08, "inches"))) + 
  geom_line(alpha = 0.7, size = 1.5, arrow = arrow(angle = 15, type = "closed", length = unit(0.1, "inches"))) + 
  theme_minimal_hgrid() +
  scale_color_tableau() +
  scale_y_log10() + 
  labs(y= "Logarithmic reported deaths", x = "Days since reporting 1st case", color = "County", caption = "\nGrey arrows represent the top 10 Texas counties by reported prevalence.") +
  ggtitle("Logarithmic cumulative reported deaths\nby days since the 1st reported case.")
```

## **Waco Metro**    
  
### Cumulative Cases {.tabset .tabset-fade .tabset-pills}    
#### Prevalence 
```{r}
metro.area <- waco.metro
metro.cases <- tx.county.cases %>% 
  filter(county %in% metro.area) 

metro.cases %>% 
  ggplot(aes(since1, value, group = county, color = county)) +
  geom_line(data = txcounty.top10.all, aes(since1, value), color = "grey", alpha = 0.8, arrow = arrow(angle = 15, type = "closed", length = unit(0.08, "inches"))) + 
  geom_line(alpha = 0.7, size = 1.5, arrow = arrow(angle = 15, type = "closed", length = unit(0.1, "inches"))) + 
  theme_minimal_hgrid() +
  scale_color_tableau() +
  labs(y= "Reported cases", x = "Days since reporting 1st case", color = "County", caption = "\nGrey arrows represent the top 10 Texas counties by reported prevalence.") +
  ggtitle("Cumulative reported cases\nby days since the 1st reported case.")
```


#### Log(Prevalence)
```{r}
metro.cases %>% 
  ggplot(aes(since1, value, group = county, color = county)) +
  geom_line(data = txcounty.top10.all, aes(since1, value), color = "grey", alpha = 0.5, arrow = arrow(angle = 15, type = "closed", length = unit(0.08, "inches"))) + 
  geom_line(alpha = 0.7, size = 1.5, arrow = arrow(angle = 15, type = "closed", length = unit(0.1, "inches"))) + 
  theme_minimal_hgrid() +
  scale_color_tableau() +
  scale_y_log10() + 
  labs(y= "Logarithmic reported cases", x = "Days since reporting 1st case", color = "County", caption = "\nGrey arrows represent the top 10 Texas counties by reported prevalence.") +
  ggtitle("Logarithmic cumulative reported cases\nby days since the 1st reported case.")
```


### Cumulative Deaths {.tabset .tabset-fade .tabset-pills}  
#### Deaths
```{r}
metro.deaths <- tx.county.deaths %>% 
  filter(county %in% metro.area) 

metro.deaths %>% 
  ggplot(aes(since1, value, group = county, color = county)) +
  geom_line(data = txcounty.deaths.top10.all, aes(since1, value), color = "grey", alpha = 0.8, arrow = arrow(angle = 15, type = "closed", length = unit(0.08, "inches"))) + 
  geom_line(alpha = 0.7, size = 1.5, arrow = arrow(angle = 15, type = "closed", length = unit(0.1, "inches"))) + 
  theme_minimal_hgrid() +
  scale_color_tableau() +
  labs(y= "Reported deaths", x = "Days since reporting 1st case", color = "County", caption = "\nGrey arrows represent the top 10 Texas counties by reported prevalence.") +
  ggtitle("Cumulative reported deaths\nby days since the 1st reported case.")
```


#### Log(Prevalence)
```{r}
metro.deaths %>% 
  ggplot(aes(since1, value, group = county, color = county)) +
  geom_line(data = txcounty.deaths.top10.all, aes(since1, value), color = "grey", alpha = 0.5, arrow = arrow(angle = 15, type = "closed", length = unit(0.08, "inches"))) + 
  geom_line(alpha = 0.7, size = 1.5, arrow = arrow(angle = 15, type = "closed", length = unit(0.1, "inches"))) + 
  theme_minimal_hgrid() +
  scale_color_tableau() +
  scale_y_log10() + 
  labs(y= "Logarithmic reported deaths", x = "Days since reporting 1st case", color = "County", caption = "\nGrey arrows represent the top 10 Texas counties by reported prevalence.") +
  ggtitle("Logarithmic cumulative reported deaths\nby days since the 1st reported case.")
```

## **El Paso**  
Because this city is awesome.    

### Cumulative Cases {.tabset .tabset-fade .tabset-pills}    
#### Prevalence 
```{r}
metro.area <- "El Paso"
metro.cases <- tx.county.cases %>% 
  filter(county %in% metro.area) 

metro.cases %>% 
  ggplot(aes(since1, value, group = county, color = county)) +
  geom_line(data = txcounty.top10.all, aes(since1, value), color = "grey", alpha = 0.8, arrow = arrow(angle = 15, type = "closed", length = unit(0.08, "inches"))) + 
  geom_line(alpha = 0.7, size = 1.5, arrow = arrow(angle = 15, type = "closed", length = unit(0.1, "inches"))) + 
  theme_minimal_hgrid() +
  scale_color_tableau() +
  labs(y= "Reported cases", x = "Days since reporting 1st case", color = "County", caption = "\nGrey arrows represent the top 10 Texas counties by reported prevalence.") +
  ggtitle("Cumulative reported cases\nby days since the 1st reported case.")
```


#### Log(Prevalence)
```{r}
metro.cases %>% 
  ggplot(aes(since1, value, group = county, color = county)) +
  geom_line(data = txcounty.top10.all, aes(since1, value), color = "grey", alpha = 0.5, arrow = arrow(angle = 15, type = "closed", length = unit(0.08, "inches"))) + 
  geom_line(alpha = 0.7, size = 1.5, arrow = arrow(angle = 15, type = "closed", length = unit(0.1, "inches"))) + 
  theme_minimal_hgrid() +
  scale_color_tableau() +
  scale_y_log10() + 
  labs(y= "Logarithmic reported cases", x = "Days since reporting 1st case", color = "County", caption = "\nGrey arrows represent the top 10 Texas counties by reported prevalence.") +
  ggtitle("Logarithmic cumulative reported cases\nby days since the 1st reported case.")
```


### Cumulative Deaths {.tabset .tabset-fade .tabset-pills}  
#### Deaths
```{r}
metro.deaths <- tx.county.deaths %>% 
  filter(county %in% metro.area) 

metro.deaths %>% 
  ggplot(aes(since1, value, group = county, color = county)) +
  geom_line(data = txcounty.deaths.top10.all, aes(since1, value), color = "grey", alpha = 0.8, arrow = arrow(angle = 15, type = "closed", length = unit(0.08, "inches"))) + 
  geom_line(alpha = 0.7, size = 1.5, arrow = arrow(angle = 15, type = "closed", length = unit(0.1, "inches"))) + 
  theme_minimal_hgrid() +
  scale_color_tableau() +
  labs(y= "Reported deaths", x = "Days since reporting 1st case", color = "County", caption = "\nGrey arrows represent the top 10 Texas counties by reported prevalence.") +
  ggtitle("Cumulative reported deaths\nby days since the 1st reported case.")
```


#### Log(Prevalence)
```{r}
metro.deaths %>% 
  ggplot(aes(since1, value, group = county, color = county)) +
  geom_line(data = txcounty.deaths.top10.all, aes(since1, value), color = "grey", alpha = 0.5, arrow = arrow(angle = 15, type = "closed", length = unit(0.08, "inches"))) + 
  geom_line(alpha = 0.7, size = 1.5, arrow = arrow(angle = 15, type = "closed", length = unit(0.1, "inches"))) + 
  theme_minimal_hgrid() +
  scale_color_tableau() +
  scale_y_log10() + 
  labs(y= "Logarithmic reported deaths", x = "Days since reporting 1st case", color = "County", caption = "\nGrey arrows represent the top 10 Texas counties by reported prevalence.") +
  ggtitle("Logarithmic cumulative reported deaths\nby days since the 1st reported case.")
```

## **Lubbock**  
Birthplace of Buddy Holly and home to an incredible windmill museum.
  
### Cumulative Cases {.tabset .tabset-fade .tabset-pills}    
#### Prevalence 
```{r}
metro.area <- "Lubbock"
metro.cases <- tx.county.cases %>% 
  filter(county %in% metro.area) 

metro.cases %>% 
  ggplot(aes(since1, value, group = county, color = county)) +
  geom_line(data = txcounty.top10.all, aes(since1, value), color = "grey", alpha = 0.8, arrow = arrow(angle = 15, type = "closed", length = unit(0.08, "inches"))) + 
  geom_line(alpha = 0.7, size = 1.5, arrow = arrow(angle = 15, type = "closed", length = unit(0.1, "inches"))) + 
  theme_minimal_hgrid() +
  scale_color_tableau() +
  labs(y= "Reported cases", x = "Days since reporting 1st case", color = "County", caption = "\nGrey arrows represent the top 10 Texas counties by reported prevalence.") +
  ggtitle("Cumulative reported cases\nby days since the 1st reported case.")
```


#### Log(Prevalence)
```{r}
metro.cases %>% 
  ggplot(aes(since1, value, group = county, color = county)) +
  geom_line(data = txcounty.top10.all, aes(since1, value), color = "grey", alpha = 0.5, arrow = arrow(angle = 15, type = "closed", length = unit(0.08, "inches"))) + 
  geom_line(alpha = 0.7, size = 1.5, arrow = arrow(angle = 15, type = "closed", length = unit(0.1, "inches"))) + 
  theme_minimal_hgrid() +
  scale_color_tableau() +
  scale_y_log10() + 
  labs(y= "Logarithmic reported cases", x = "Days since reporting 1st case", color = "County", caption = "\nGrey arrows represent the top 10 Texas counties by reported prevalence.") +
  ggtitle("Logarithmic cumulative reported cases\nby days since the 1st reported case.")
```


### Cumulative Deaths {.tabset .tabset-fade .tabset-pills}  
#### Deaths
```{r}
metro.deaths <- tx.county.deaths %>% 
  filter(county %in% metro.area) 

metro.deaths %>% 
  ggplot(aes(since1, value, group = county, color = county)) +
  geom_line(data = txcounty.deaths.top10.all, aes(since1, value), color = "grey", alpha = 0.8, arrow = arrow(angle = 15, type = "closed", length = unit(0.08, "inches"))) + 
  geom_line(alpha = 0.7, size = 1.5, arrow = arrow(angle = 15, type = "closed", length = unit(0.1, "inches"))) + 
  theme_minimal_hgrid() +
  scale_color_tableau() +
  labs(y= "Reported deaths", x = "Days since reporting 1st case", color = "County", caption = "\nGrey arrows represent the top 10 Texas counties by reported prevalence.") +
  ggtitle("Cumulative reported deaths\nby days since the 1st reported case.")
```

#### Log(Prevalence)
```{r}
metro.deaths %>% 
  ggplot(aes(since1, value, group = county, color = county)) +
  geom_line(data = txcounty.deaths.top10.all, aes(since1, value), color = "grey", alpha = 0.5, arrow = arrow(angle = 15, type = "closed", length = unit(0.08, "inches"))) + 
  geom_line(alpha = 0.7, size = 1.5, arrow = arrow(angle = 15, type = "closed", length = unit(0.1, "inches"))) + 
  theme_minimal_hgrid() +
  scale_color_tableau() +
  scale_y_log10() + 
  labs(y= "Logarithmic reported deaths", x = "Days since reporting 1st case", color = "County", caption = "\nGrey arrows represent the top 10 Texas counties by reported prevalence.") +
  ggtitle("Logarithmic cumulative reported deaths\nby days since the 1st reported case.")
```
