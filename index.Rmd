---
title: "US COVID-19 Trends"
author: "By Mark Zobeck, MD, MPH"
output:
  html_document:
    df_print: paged
    toc: TRUE
    toc_float:
      collapsed: TRUE
      smooth_scroll: TRUE
    toc_depth: 3
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(message = F)
knitr::opts_chunk$set(warning = F)
knitr::opts_chunk$set(echo=FALSE) 
 
library(tidyverse)
library(readxl)
library(janitor)
library(data.table)
library(lubridate)
library(naniar)
library(knitr)
library(kableExtra)
library(ggdag)
library(randomForest)
library(brms)
library(bayesplot)
library(cowplot)
library(skimr)
library(ggthemes)
library(httr)
library(rjson)
library(jsonlite)
library(RCurl)

#time index for daily updates 
today <- format(Sys.time(), "%Y-%m-%d")
yesterday <- ymd(format(Sys.time(), "%Y-%m-%d")) - days(1)
```



```{r}
counties.pop <- read_csv("counties_pop_fromscrape-200325.csv") %>% 
  select(-lat, -long)

state.abrv <- read_xlsx("state_pop.xlsx") %>% 
  clean_names() %>% 
  select(state, abrv, region)

states.counties.hist <- read_csv("states_counties_to324.csv")

jh.data.today <- read_csv("https://opendata.arcgis.com/datasets/628578697fb24d8ea4c32fa0c5ae1843_0.csv")

states.counties.today <- jh.data.today %>% 
  clean_names() %>% 
  rename(state = province_state) %>%
  filter(country_region == "US") %>% 
  left_join(state.abrv) %>% 
  pivot_longer(confirmed:deaths, names_to = "type", values_to = "value") %>% 
  select(state = abrv, county = admin2, date = last_update, type, value, lat, long) %>% 
  left_join(counties.pop) %>% 
  select(state, county, population, date, type, value, lat, long) %>% 
  mutate(type = ifelse(str_detect(type, "confir"), "cases",type),
         date = date(date))

states.counties <- states.counties.today %>% 
  bind_rows(states.counties.hist)


# TX county data
tx.county <- states.counties %>% 
  filter(state == "TX" ) %>% 
  filter(!is.na(county))

#tx county cases first
tx.county.cases <- tx.county %>% 
  filter(type == "cases") %>% 
  filter(value > 0) %>% 
  group_by(county) %>% 
  mutate(since1 = rank(date))

txcounty.top10 <- tx.county.cases %>% 
  filter(date == yesterday ) %>% 
  arrange(desc(value)) %>% 
  head(10)

txcounty.top10.all <- tx.county.cases %>% 
  filter(county %in% txcounty.top10$county)


#tx county cases deaths

d1.index <- tx.county.cases %>% 
  select(county, date, since1)

tx.county.deaths <- tx.county %>% 
  filter(type == "deaths") %>% 
  left_join(d1.index)

txcounty.deaths.top10.all <- tx.county.deaths %>% 
  filter(county %in% txcounty.top10$county)

# houston data 
houston.metro <- c("Harris", "Fort Bend", "Montgomery", "Galveston", "Brazoria", "Liberty", "Chambers", "Waller")  

houston.metro.cases <- tx.county.cases %>% 
  filter(county %in% houston.metro) 

```


```{r}
# state level data --------------------------------------------------------------
states.raw <- read_csv("https://covidtracking.com/api/states/daily.csv") %>% 
  mutate(date = ymd(date)) %>% 
  mutate(death= replace(death, state == "MA" & date == "2020-03-21", 5))

state.pop <- read_xlsx("state_pop.xlsx") %>%  
  select(state = abrv, population, region)

states.pos <- states.raw %>% 
  filter(positive > 10) %>% 
  group_by(state) %>% 
  mutate(since10 = rank(date)) %>% 
  left_join(state.pop) %>% 
  mutate(pos100k = positive/population * 100000,
         death100k = death/population * 100000)



#remember this is for all states with > 10 cases only
states.top10.today <- states.pos %>% 
  filter(date == today ) %>% 
  arrange(desc(positive)) %>% 
  head(10)

states.top10.yesterday <- states.pos %>% 
  filter(date == yesterday ) %>% 
  arrange(desc(positive)) %>% 
  head(10)

if (nrow(states.top10.today) > 0) {
  states.top10 <- states.top10.today
} else {
  states.top10 <- states.top10.yesterday
}

states.top10.all <- states.pos %>% 
  filter(state %in% states.top10$state)

#top 20 for the state comparisons 
states.top20.today <- states.pos %>% 
  filter(date == today ) %>% 
  arrange(desc(positive)) %>% 
  head(20)

states.top20.yesterday <- states.pos %>% 
  filter(date == yesterday ) %>% 
  arrange(desc(positive)) %>% 
  head(20)


if (nrow(states.top20.today) > 0) {
  states.top20 <- states.top20.today
} else {
  states.top20 <- states.top20.yesterday
}

states.top20.all <- states.pos %>% 
  filter(state %in% states.top20$state)

#state new cases
states.newcases <- states.pos %>% 
  group_by(state) %>% 
  arrange(state, date) %>% 
  mutate(new.cases = ifelse(is.na(lag(positive)), -1, positive - lag(positive)),
         new.deaths = ifelse(is.na(lag(death)), -1, death - lag(death))) 

states.new.top10 <- states.newcases %>% 
  filter(state %in% states.top10$state)

states.new.top20 <- states.newcases %>% 
  filter(state %in% states.top20$state)

```
  
     
       
         
           
             
             
# **Welcome to US COVID-19 Trends** 
This website is intended as a reference to track US regional trends in COVID-19 cases and deaths. 

**Before looking at the graphs below, please read this one HUGE caution**  

##### **THESE DATA ARE WRONG**  
By that, I mean that the data are not **reality** in the sense that most people want. They **do not** tell us the **actual** number of cases and deaths per day due to COVID-19. **They are a super-dirty, extremely-noisy, very-wrong best attempts at measuring cases.** They are most certainly underestimates of the true case load. The graphs are best interpreted looking at the direction of the states' long term trends and not as reliable reports of what is going on right now at this very moment. They are most certainly underestimates of the true case load. That being said, it is also amazing we have this caliber of data at all, even if there is inevitable noise. The people aggregating these numbers doing an incredible job and have played an important role in managing the crisis! 

**[If this is your first time here, click here to read the longer caution about data interpretation.](http://www.uscovidtrends.com/about.html)**  
  
**Note:** This website was last updated at **`r now()`**. I intend to update it daily. I also hope to continue to expand this website with more states and counties as time permits.  
  
With that, I wish you happy and cautious data gazing!  
**Mark Zobeck MD, MPH**  
  
    
    

# **States** 
A refresher about `log` scales: On the `y-axis` you will sometimes see it in `log10` scale. This makes it so that the space between 0-10, 10-100, 100-1000, and so forth are the same distance. This helps to visualize trends of things that happen explosively, like the exponential growth of a virus. I provide both an untransformed and `log10` transformed scale below.

## **The Top 10**
Here are reports for the top 10 states by reported number of cases. These are the states where COVID-19 seems to be most active. I advise that you pay attention to New York because of its current severity (what the rest of the United States could become?), and Washington and California because they had an early high case load and took earlier measures such as "social distancing" and cancelling larger gatherings, and Luisiana, which seems to have a high reported case load for its size. 

The `x-axis` below should be interpreted as "days since the state reported its 10th case". This helps to show where each state is from a standard reference point in time and facilitates better comparisons of trends. 

### Cumulative Cases For the Top 10 States by Prevalence {.tabset .tabset-fade .tabset-pills}  
#### Prevalence 
```{r states top 10}
states.top10.all %>% 
  ggplot(aes(since10, positive, group = state, color = state)) +
  geom_line(alpha = 0.7, size = 1.5, arrow = arrow(angle = 15, type = "closed", length = unit(0.1, "inches"))) + 
  theme_minimal_hgrid() +
  scale_color_calc() +
  labs(y= "Reported Cases", x = "Days since reporting 10th case", color = "State") +
  ggtitle("Cumulative reported cases by days\nsince the 10th reported case.")
```

#### Log(Prevalence)
```{r}
states.top10.all %>% 
  ggplot(aes(since10, positive, group = state, color = state)) +
  geom_line(alpha = 0.7, size = 1.5, arrow = arrow(angle = 15, type = "closed", length = unit(0.1, "inches"))) + 
  theme_minimal_hgrid() +
  scale_color_calc() +
  scale_y_log10() + 
  labs(y= "Logarithmic Reported Cases", x = "Days since reporting 10th case", color = "State") +
  ggtitle("Logarithmic cumulative reported cases by days\nsince the 10th reported case.")
```


### Cumulative Cases per 100,000 people For the Top 10 States by Prevalence {.tabset .tabset-fade .tabset-pills} 
These data are how many cases for every 100,000 people in the state. It helps to compare more populous states from less populous ones.  

#### Prevalence 
```{r}
states.top10.all %>% 
  ggplot(aes(since10, pos100k, group = state, color = state)) +
  geom_line(alpha = 0.7, size = 1.5, arrow = arrow(angle = 15, type = "closed", length = unit(0.1, "inches"))) + 
  theme_minimal_hgrid() +
  scale_color_calc() +
  labs(y= "Reported Cases", x = "Days since reporting 10th case", color = "State") +
  ggtitle("Cumulative reported cases per 100,000 people by days\nsince the 10th reported case.")
```


#### Log(Prevalence)
```{r}
states.top10.all %>% 
  ggplot(aes(since10, pos100k, group = state, color = state)) +
  geom_line(alpha = 0.7, size = 1.5, arrow = arrow(angle = 15, type = "closed", length = unit(0.1, "inches"))) + 
  theme_minimal_hgrid() +
  scale_color_calc() +
  scale_y_log10()+
  labs(y= "Logarithmic reported Cases", x = "Days since reporting 10th case", color = "State") +
  ggtitle("Logarithmic cumulative reported cases\nper 100,000 people by days since the 10th reported case.")
```


### Cumulative Deaths For the Top 10 States by Prevalence {.tabset .tabset-fade .tabset-pills}  
#### Deaths
```{r}
states.top10.all %>% 
  ggplot(aes(since10, death, group = state, color = state)) +
  geom_line(alpha = 0.7, size = 1.5, arrow = arrow(angle = 15, type = "closed", length = unit(0.1, "inches"))) + 
  theme_minimal_hgrid() +
  scale_color_calc() + 
  labs(y= "Reported Deaths", x = "Days since reporting 10th case", color = "State") +
  ggtitle("Number of cumulative reported deaths by days\nsince the 10th reported case.")

```


#### Log(Deaths)
```{r}
states.top10.all %>% 
  ggplot(aes(since10, death, group = state, color = state)) +
  geom_line(alpha = 0.7, size = 1.5, arrow = arrow(angle = 15, type = "closed", length = unit(0.1, "inches"))) + 
  theme_minimal_hgrid() +
  scale_color_calc() + 
  scale_y_log10() + 
  labs(y= "Logarithmic Positive Reported Cases", x = "Days since reporting 10th case", color = "State") +
  ggtitle("Logarithmic number of cumulative reported deaths\nby days since the 10th reported case.")
```


### Cumulative Deaths per 100,000 People For the Top 10 States by Prevalence {.tabset .tabset-fade .tabset-pills}  
#### Deaths 
```{r}
states.top10.all %>% 
  ggplot(aes(since10, death100k, group = state, color = state)) +
  geom_line(alpha = 0.7, size = 1.5, arrow = arrow(angle = 15, type = "closed", length = unit(0.1, "inches"))) + 
  theme_minimal_hgrid() +
  scale_color_calc() + 
  labs(y= "Reported Deaths per 100,000 people", x = "Days since reporting 10th case", color = "State") +
  ggtitle("Number of cumulative reported deaths per 100,000 people\nby days since the 10th reported case.")
```


#### Log(Deaths)
```{r}
states.top10.all %>% 
  ggplot(aes(since10, death100k, group = state, color = state)) +
  geom_line(alpha = 0.7, size = 1.5, arrow = arrow(angle = 15, type = "closed", length = unit(0.1, "inches"))) + 
  theme_minimal_hgrid() +
  scale_color_calc() + 
  scale_y_log10() +
  labs(y= "Reported deaths per 100,000 people", x = "Days since reporting 10th case", color = "State") +
  ggtitle("Logarithmic number of cumulative reported deaths per 100,000 people\nby days since the 10th reported case.")

```


### New Reported Cases per Day For the Top 10 States by Prevalence {.tabset .tabset-fade .tabset-pills}  
#### New Cases 
```{r}
states.new.top10 %>% 
  ggplot(aes(since10, new.cases, group = state, color = state)) +
  geom_line(alpha = 0.7, size = 1.5, arrow = arrow(angle = 15, type = "closed", length = unit(0.1, "inches"))) + 
  theme_minimal_hgrid() +
  scale_color_calc() + 
  labs(y= "New reported cases", x = "Days since reporting 10th case", color = "State") +
  ggtitle("Number of reported new cases\nby days since the 10th reported case.")
```


#### Log(New Cases)
```{r}
states.new.top10 %>% 
  ggplot(aes(since10, new.cases, group = state, color = state)) +
  geom_line(alpha = 0.7, size = 1.5, arrow = arrow(angle = 15, type = "closed", length = unit(0.1, "inches"))) + 
  theme_minimal_hgrid() +
  scale_color_calc() +
  scale_y_log10() +
  labs(y= "Logarithmic daily reported cases", x = "Days since reporting 10th case", color = "State") +
  ggtitle("Logarithmic number of daily reported new cases\nby days since the 10th reported case.")
```


### News Deaths per Day For the Top 10 States by Prevalence {.tabset .tabset-fade .tabset-pills}  
#### New Deaths 
```{r}
states.new.top10 %>% 
  ggplot(aes(since10, new.deaths, group = state, color = state)) +
  geom_line(alpha = 0.7, size = 1.5, arrow = arrow(angle = 15, type = "closed", length = unit(0.1, "inches"))) + 
  theme_minimal_hgrid() +
  scale_color_calc() + 
  labs(y= "New reported deaths", x = "Days since reporting 10th case", color = "State") +
  ggtitle("Logarithmic number of reported new deaths\nby days since the 10th reported case.")
```


#### Log(New Deaths)
```{r}
states.new.top10 %>% 
  ggplot(aes(since10, new.deaths, group = state, color = state)) +
  geom_line(alpha = 0.7, size = 1.5, arrow = arrow(angle = 15, type = "closed", length = unit(0.1, "inches"))) + 
  theme_minimal_hgrid() +
  scale_color_calc() +
  scale_y_log10() +
  labs(y= "Logarithmic new reported deaths", x = "Days since reporting 10th case", color = "State") +
  ggtitle("Logarithmic number of reported new deaths\nby days since the 10th reported case.")
```


## **Texas**  
Focusing in on the Lone Star State. 
```{r }
the.state <- "TX"

current.state <- states.pos %>% 
  filter(state == the.state)

current.state.new <- states.newcases %>% 
  filter(state == the.state)

```

### Cumulative Cases {.tabset .tabset-fade .tabset-pills}  
#### Prevalence 
```{r }
current.state %>% 
  ggplot(aes(since10, positive, group = state, color = state)) +
  geom_line(data=states.top20.all, aes(since10, positive), color = "grey", alpha = 0.5, arrow = arrow(angle = 15, type = "closed", length = unit(0.08, "inches"))) +
  geom_line(alpha = 0.7, size = 1.5, arrow = arrow(angle = 15, type = "closed", length = unit(0.1, "inches"))) + 
  theme_minimal_hgrid() +
  scale_color_calc() +
  labs(y= "Reported Cases", x = "Days since reporting 10th case", color = "State", caption = "\nGrey arrows represent the top 20 states by reported prevalence.") +
  ggtitle("Cumulative reported cases by days\nsince the 10th reported case.")
```

#### Log(Prevalence)
```{r}
current.state %>% 
  ggplot(aes(since10, positive, group = state, color = state)) +
  geom_line(data=states.top20.all, aes(since10, positive), color = "grey", alpha = 0.5, arrow = arrow(angle = 15, type = "closed", length = unit(0.08, "inches"))) +
  geom_line(alpha = 0.7, size = 1.5, arrow = arrow(angle = 15, type = "closed", length = unit(0.1, "inches"))) + 
  theme_minimal_hgrid() +
  scale_color_calc() +
  scale_y_log10() +
  labs(y= "Logarithmic Reported Cases", x = "Days since reporting 10th case", color = "State", caption = "\nGrey arrows represent the top 20 states by reported prevalence.") +
  ggtitle("Logarithmic cumulative reported cases by days\nsince the 10th reported case.")
```


### Cumulative Cases per 100,000 People {.tabset .tabset-fade .tabset-pills} 
These data are how many cases for every 100,000 people in the state. It helps to compare more populous states from less populous ones.  

#### Prevalence 
```{r}
current.state %>% 
  ggplot(aes(since10, pos100k, group = state, color = state)) +
  geom_line(data=states.top20.all, aes(since10, pos100k), color = "grey", alpha = 0.5, arrow = arrow(angle = 15, type = "closed", length = unit(0.08, "inches"))) +
  geom_line(alpha = 0.7, size = 1.5, arrow = arrow(angle = 15, type = "closed", length = unit(0.1, "inches"))) + 
  theme_minimal_hgrid() +
  scale_color_calc()  +
  labs(y= "Reported Cases", x = "Days since reporting 10th case", color = "State", caption = "\nGrey arrows represent the top 20 states by reported prevalence.") +
  ggtitle("Cumulative reported cases per 100,000 people by days\nsince the 10th reported case.")
```


#### Log(Prevalence)
```{r}

current.state %>% 
  ggplot(aes(since10, pos100k, group = state, color = state)) +
  geom_line(data=states.top20.all, aes(since10, pos100k), color = "grey", alpha = 0.5, arrow = arrow(angle = 15, type = "closed", length = unit(0.08, "inches"))) +
  geom_line(alpha = 0.7, size = 1.5, arrow = arrow(angle = 15, type = "closed", length = unit(0.1, "inches"))) + 
  theme_minimal_hgrid() +
  scale_color_calc() +
  scale_y_log10() +
  labs(y= "Logarithmic reported Cases", x = "Days since reporting 10th case", color = "State") +
  ggtitle("Logarithmic cumulative reported cases\nper 100,000 people by days since the 10th reported case.")
```


### Cumulative Deaths {.tabset .tabset-fade .tabset-pills}  
#### Deaths
```{r}
current.state %>% 
  ggplot(aes(since10, death, group = state, color = state)) +
  geom_line(data=states.top20.all, aes(since10, death), color = "grey", alpha = 0.5, arrow = arrow(angle = 15, type = "closed", length = unit(0.08, "inches"))) +
  geom_line(alpha = 0.7, size = 1.5, arrow = arrow(angle = 15, type = "closed", length = unit(0.1, "inches"))) +
  theme_minimal_hgrid() +
  scale_color_calc()+ 
  labs(y= "Reported Deaths", x = "Days since reporting 10th case", color = "State", caption = "\nGrey arrows represent the top 20 states by reported prevalence.") +
  ggtitle("Number of cumulative reported deaths by days\nsince the 10th reported case.")

```


#### Log(Deaths)
```{r}


current.state %>% 
  ggplot(aes(since10, death, group = state, color = state)) +
  geom_line(data=states.top20.all, aes(since10, death), color = "grey", alpha = 0.5, arrow = arrow(angle = 15, type = "closed", length = unit(0.08, "inches"))) +
  geom_line(alpha = 0.7, size = 1.5, arrow = arrow(angle = 15, type = "closed", length = unit(0.1, "inches"))) + 
  theme_minimal_hgrid() +
  scale_color_calc() + 
  scale_y_log10() + 
  labs(y= "Logarithmic Positive Reported Cases", x = "Days since reporting 10th case", color = "State", caption = "\nGrey arrows represent the top 20 states by reported prevalence.") +
  ggtitle("Logarithmic number of cumulative reported deaths\nby days since the 10th reported case.")
```


### Cumulative Deaths per 100,000 People {.tabset .tabset-fade .tabset-pills}  
#### Deaths 
```{r}
current.state %>% 
  ggplot(aes(since10, death100k, group = state, color = state)) +
  geom_line(data=states.top20.all, aes(since10, death100k), color = "grey", alpha = 0.5, arrow = arrow(angle = 15, type = "closed", length = unit(0.08, "inches"))) +
  geom_line(alpha = 0.7, size = 1.5, arrow = arrow(angle = 15, type = "closed", length = unit(0.1, "inches"))) +
  theme_minimal_hgrid() +
  scale_color_calc()+ 
  labs(y= "Reported Deaths per 100,000 people", x = "Days since reporting 10th case", color = "State", caption = "\nGrey arrows represent the top 20 states by reported prevalence.") +
  ggtitle("Number of cumulative reported deaths per 100,000 people\nby days since the 10th reported case.")
```


#### Log(Deaths)
```{r}


current.state %>% 
  ggplot(aes(since10, death100k, group = state, color = state)) +
  geom_line(data=states.top20.all, aes(since10, death100k), color = "grey", alpha = 0.5, arrow = arrow(angle = 15, type = "closed", length = unit(0.08, "inches"))) +
  geom_line(alpha = 0.7, size = 1.5, arrow = arrow(angle = 15, type = "closed", length = unit(0.1, "inches"))) +
  theme_minimal_hgrid() +
  scale_color_calc() + 
  scale_y_log10()+
  labs(y= "Reported deaths per 100,000 people", x = "Days since reporting 10th case", color = "State", caption = "\nGrey arrows represent the top 20 states by reported prevalence.") +
  ggtitle("Logarithmic number of cumulative reported deaths per 100,000 people\nby days since the 10th reported case.")

```


### New Reported Cases per Day {.tabset .tabset-fade .tabset-pills}  
#### New Cases 
```{r}
current.state.new %>% 
  ggplot(aes(since10, new.cases, group = state, color = state)) +
  geom_line(data = states.new.top20, aes(since10, new.cases), color = "grey", alpha = 0.5, arrow = arrow(angle = 15, type = "closed", length = unit(0.08, "inches"))) + 
  geom_line(alpha = 0.7, size = 1.5, arrow = arrow(angle = 15, type = "closed", length = unit(0.1, "inches"))) + 
  theme_minimal_hgrid() +
  scale_color_calc()+ 
  labs(y= "New reported cases", x = "Days since reporting 10th case", color = "State", caption = "\nGrey arrows represent the top 20 states by reported prevalence.") +
  ggtitle("Number of reported new cases\nby days since the 10th reported case.")
```


#### Log(New Cases)
```{r}


current.state.new %>% 
  ggplot(aes(since10, new.cases, group = state, color = state)) +
  geom_line(data = states.new.top20, aes(since10, new.cases), color = "grey", alpha = 0.5, arrow = arrow(angle = 15, type = "closed", length = unit(0.08, "inches"))) + 
  theme_minimal_hgrid() +
  geom_line(alpha = 0.7, size = 1.5, arrow = arrow(angle = 15, type = "closed", length = unit(0.1, "inches"))) + 
  scale_color_calc() +
  scale_y_log10()+
  labs(y= "Logarithmic daily reported cases", x = "Days since reporting 10th case", color = "State", caption = "\nGrey arrows represent the top 20 states by reported prevalence.") +
  ggtitle("Logarithmic number of daily reported new cases\nby days since the 10th reported case.")
```


### News Deaths by Day {.tabset .tabset-fade .tabset-pills}  
#### New Deaths 
```{r}
current.state.new %>% 
  ggplot(aes(since10, new.deaths, group = state, color = state)) +
  geom_line(data = states.new.top20, aes(since10, new.deaths), color = "grey", alpha = 0.5, arrow = arrow(angle = 15, type = "closed", length = unit(0.08, "inches"))) + 
  geom_line(alpha = 0.7, size = 1.5, arrow = arrow(angle = 15, type = "closed", length = unit(0.1, "inches"))) + 
  theme_minimal_hgrid() +
  scale_color_calc() + 
  labs(y= "New reported deaths", x = "Days since reporting 10th case", color = "State", caption = "\nGrey arrows represent the top 20 states by reported prevalence.") +
  ggtitle("Logarithmic number of reported new deaths\nby days since the 10th reported case.")
```


#### Log(New Deaths)
```{r}
current.state.new %>% 
  ggplot(aes(since10, new.deaths, group = state, color = state)) +
  geom_line(data = states.new.top20, aes(since10, new.deaths), color = "grey", alpha = 0.5, arrow = arrow(angle = 15, type = "closed", length = unit(0.08, "inches"))) + 
  geom_line(alpha = 0.7, size = 1.5, arrow = arrow(angle = 15, type = "closed", length = unit(0.1, "inches"))) + 
  theme_minimal_hgrid() +
  scale_color_calc() +
  scale_y_log10() +
  labs(y= "Logarithmic new reported deaths", x = "Days since reporting 10th case", color = "State", caption = "\nGrey arrows represent the top 20 states by reported prevalence.") +
  ggtitle("Logarithmic number of reported new deaths\nby days since the 10th reported case.")
```



# **Counties**  
*Important Note*: On 3-22-20 and 3-25-20, the data sources for how the county level data were reported changed. Please be cautious in interpreting the recent trends as they may look steeper due to differences in data reporting.   

Note: that instead of days since 10th case, the `x-axis` is now days since reported 1st case.   

## **Texas**    
### Cumulative Cases per Day for the Top 10 Counties {.tabset .tabset-fade .tabset-pills}  
#### Prevalence 
```{r}
txcounty.top10.all %>% 
  ggplot(aes(since1, value, group = county, color = county)) +
  geom_line(alpha = 0.7, size = 1.5, arrow = arrow(angle = 15, type = "closed", length = unit(0.1, "inches"))) + 
  theme_minimal_hgrid() +
  scale_color_tableau()+ 
  labs(y= "Reported cases", x = "Days since reporting 1st case", color = "County") +
  ggtitle("Cumulative reported cases\nby days since the 1st reported case.")
```


#### Log(New Cases)
```{r}
txcounty.top10.all %>% 
  ggplot(aes(since1, value, group = county, color = county)) +
  geom_line(alpha = 0.7, size = 1.5, arrow = arrow(angle = 15, type = "closed", length = unit(0.1, "inches"))) + 
  theme_minimal_hgrid() +
  scale_color_tableau()+ 
  scale_y_log10()+
  labs(y= "Logarithmic reported cases", x = "Days since reporting 1st case", color = "County") +
  ggtitle("Logarithmic cumulative reported cases\nby days since the 1st reported case.")
```



# **Houston Metro Area**    
*Important Note*: On 3-22-20 and 3-25-20, the data sources for how the county level data were reported changed. Please be cautious in interpreting the recent trends as they may look steeper due to differences in data reporting.   

### Cumulative Cases For the Houston Metro Area {.tabset .tabset-fade .tabset-pills}    
#### Prevalence 
```{r}
houston.metro.cases %>% 
  ggplot(aes(since1, value, group = county, color = county)) +
  geom_line(data = txcounty.top10.all, aes(since1, value), color = "grey", alpha = 0.8, arrow = arrow(angle = 15, type = "closed", length = unit(0.08, "inches"))) + 
  geom_line(alpha = 0.7, size = 1.5, arrow = arrow(angle = 15, type = "closed", length = unit(0.1, "inches"))) + 
  theme_minimal_hgrid() +
  scale_color_tableau() +
  labs(y= "Reported cases", x = "Days since reporting 1st case", color = "County", caption = "\nGrey arrows represent the top 10 counties by reported prevalence.") +
  ggtitle("Cumulative reported cases\nby days since the 1st reported case.")
```


#### Log(Prevalence)
```{r}
houston.metro.cases %>% 
  ggplot(aes(since1, value, group = county, color = county)) +
  geom_line(data = txcounty.top10.all, aes(since1, value), color = "grey", alpha = 0.5, arrow = arrow(angle = 15, type = "closed", length = unit(0.08, "inches"))) + 
  geom_line(alpha = 0.7, size = 1.5, arrow = arrow(angle = 15, type = "closed", length = unit(0.1, "inches"))) + 
  theme_minimal_hgrid() +
  scale_color_tableau() +
  scale_y_log10() + 
  labs(y= "Logarithmic reported cases", x = "Days since reporting 1st case", color = "County", caption = "\nGrey arrows represent the top 10 counties by reported prevalence.") +
  ggtitle("Logarithmic Cumulative reported cases\nby days since the 1st reported case.")
```


