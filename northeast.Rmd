---
title: "US COVID-19 Trends"
author: "By Mark Zobeck, MD, MPH"
output:
  html_document:
    df_print: paged
    toc: TRUE
    toc_float:
      collapsed: TRUE
      smooth_scroll: TRUE
    toc_depth: 3
    fig_width: 10
    fig_height: 7

---

<script async src="https://www.googletagmanager.com/gtag/js?id=UA-78251343-4"></script>

<script>

  window.dataLayer = window.dataLayer || [];

  function gtag(){dataLayer.push(arguments);}

  gtag('js', new Date());



  gtag('config', 'UA-78251343-4');

</script>
```{r setup, include=FALSE}
knitr::opts_chunk$set(message = F)
knitr::opts_chunk$set(warning = F)
knitr::opts_chunk$set(echo=FALSE) 
 
library(tidyverse)
library(readxl)
library(janitor)
library(data.table)
library(lubridate)
library(naniar)
library(knitr)
library(kableExtra)
library(ggdag)
library(randomForest)
library(brms)
library(bayesplot)
library(cowplot)
library(skimr)
library(ggthemes)
library(httr)
library(rjson)
library(jsonlite)
library(RCurl)
library(ggrepel)
```

```{r, include=FALSE}
target.states <- read_csv("initial_files/state_regions.csv") %>% 
  filter(region == "Northeast")

fwrite(target.states, "target_states.csv")
```

```{r, include = FALSE}
source("initializer.R")
source("state_functions.R")
```

# **The Northeast**

--- 

## **The Top 10**  
### Cumulative Cases {.tabset .tabset-fade .tabset-pills}  
#### Prevalence 
```{r }
top.prev(states.top10.all)
```

#### Log(Prevalence)
```{r}
top.lprev(states.top10.all)
```

###  {.toc-ignore}

[Return to top](#header)

### Cumulative Deaths {.tabset .tabset-fade .tabset-pills}  
#### Deaths
```{r}
top.death(states.top10d.all)
```


#### Log(Deaths)
```{r}
top.ldeath(states.top10d.all)
```

###  {.toc-ignore}

[Return to top](#header)

  
### Cumulative Cases per 100,000 People {.tabset .tabset-fade .tabset-pills} 
#### Cases
```{r}
top.prev100(states.top10.all)
```


#### Log(Cases)
```{r}
top.lprev100(states.top10.all)
```

###  {.toc-ignore}

[Return to top](#header)
  
### Cumulative Deaths per 100,000 People {.tabset .tabset-fade .tabset-pills}  
#### Deaths 
```{r}
top.deaths100(states.top10d.all)
```


#### Log(Deaths)
```{r}
top.ldeaths100(states.top10d.all)
```

###  {.toc-ignore}

[Return to top](#header)

### New Cases per Day {.tabset .tabset-fade .tabset-pills}  
#### New Cases 
```{r}
top.casenew(states.new.top10)
```


#### Log(New Cases)
```{r}
top.lcasenew(states.new.top10)
```

### {.toc-ignore}

[Return to top](#header)
  

### New Deaths per Day {.tabset .tabset-fade .tabset-pills}  
#### New Deaths 
```{r}
top.deathnew(states.newdeaths.top10)
```


#### Log(New Deaths)
```{r}
top.ldeathnew(states.newdeaths.top10)
```

### {.toc-ignore} 

---

## **Connecticut**  

[Return to top](#header)
```{r }
the.state <- "CT"

current.state <- states.pos %>% 
  filter(state == the.state)

current.state.death <- states.deaths %>% 
    filter(state == the.state)

current.state.new <- states.newcases %>% 
  filter(state == the.state)

current.state.newdeath <- states.newdeaths %>% 
    filter(state == the.state)

```


### Cumulative Cases {.tabset .tabset-fade .tabset-pills}  
#### Prevalence 
```{r }
state.prev(current.state)
```

#### Log(Prevalence)
```{r}
state.lprev(current.state)
```

###  {.toc-ignore}

[Return to top](#header)

### Cumulative Deaths {.tabset .tabset-fade .tabset-pills}  
#### Deaths
```{r}
state.death(current.state.death)
```


#### Log(Deaths)
```{r}
state.ldeath(current.state.death)
```

###  {.toc-ignore}

[Return to top](#header)

  
### Cumulative Cases per 100,000 People {.tabset .tabset-fade .tabset-pills} 
#### Cases
```{r}
state.prev100(current.state)
```


#### Log(Cases)
```{r}
state.lprev100(current.state)
```

###  {.toc-ignore}

[Return to top](#header)
  
### Cumulative Deaths per 100,000 People {.tabset .tabset-fade .tabset-pills}  
#### Deaths 
```{r}
state.death100(current.state.death)
```


#### Log(Deaths)
```{r}
state.ldeath100(current.state.death)
```

###  {.toc-ignore}

[Return to top](#header)

### New Cases per Day {.tabset .tabset-fade .tabset-pills}  
#### New Cases 
```{r}
state.casenew(current.state.new)
```


#### Log(New Cases)
```{r}
state.lcasenew(current.state.new)
```

### {.toc-ignore}

[Return to top](#header)
  

### New Deaths per Day {.tabset .tabset-fade .tabset-pills}  
#### New Deaths 
```{r}
state.deathnew(current.state.newdeath)
```


#### Log(New Deaths)
```{r}
state.ldeathnew(current.state.newdeath)
```

### {.toc-ignore} 

---

## **Massachusets**  

[Return to top](#header)
```{r }
the.state <- "MA"

current.state <- states.pos %>% 
  filter(state == the.state)

current.state.death <- states.deaths %>% 
    filter(state == the.state)

current.state.new <- states.newcases %>% 
  filter(state == the.state)

current.state.newdeath <- states.newdeaths %>% 
    filter(state == the.state)

```


### Cumulative Cases {.tabset .tabset-fade .tabset-pills}  
#### Prevalence 
```{r }
state.prev(current.state)
```

#### Log(Prevalence)
```{r}
state.lprev(current.state)
```

###  {.toc-ignore}

[Return to top](#header)

### Cumulative Deaths {.tabset .tabset-fade .tabset-pills}  
#### Deaths
```{r}
state.death(current.state.death)
```


#### Log(Deaths)
```{r}
state.ldeath(current.state.death)
```

###  {.toc-ignore}

[Return to top](#header)

  
### Cumulative Cases per 100,000 People {.tabset .tabset-fade .tabset-pills} 
#### Cases
```{r}
state.prev100(current.state)
```


#### Log(Cases)
```{r}
state.lprev100(current.state)
```

###  {.toc-ignore}

[Return to top](#header)
  
### Cumulative Deaths per 100,000 People {.tabset .tabset-fade .tabset-pills}  
#### Deaths 
```{r}
state.death100(current.state.death)
```


#### Log(Deaths)
```{r}
state.ldeath100(current.state.death)
```

###  {.toc-ignore}

[Return to top](#header)

### New Cases per Day {.tabset .tabset-fade .tabset-pills}  
#### New Cases 
```{r}
state.casenew(current.state.new)
```


#### Log(New Cases)
```{r}
state.lcasenew(current.state.new)
```

### {.toc-ignore}

[Return to top](#header)
  

### New Deaths per Day {.tabset .tabset-fade .tabset-pills}  
#### New Deaths 
```{r}
state.deathnew(current.state.newdeath)
```


#### Log(New Deaths)
```{r}
state.ldeathnew(current.state.newdeath)
```

### {.toc-ignore} 

---

## **Maine**  

[Return to top](#header)
```{r }
the.state <- "ME"

current.state <- states.pos %>% 
  filter(state == the.state)

current.state.death <- states.deaths %>% 
    filter(state == the.state)

current.state.new <- states.newcases %>% 
  filter(state == the.state)

current.state.newdeath <- states.newdeaths %>% 
    filter(state == the.state)

```


### Cumulative Cases {.tabset .tabset-fade .tabset-pills}  
#### Prevalence 
```{r }
state.prev(current.state)
```

#### Log(Prevalence)
```{r}
state.lprev(current.state)
```

###  {.toc-ignore}

[Return to top](#header)

### Cumulative Deaths {.tabset .tabset-fade .tabset-pills}  
#### Deaths
```{r}
state.death(current.state.death)
```


#### Log(Deaths)
```{r}
state.ldeath(current.state.death)
```

###  {.toc-ignore}

[Return to top](#header)

  
### Cumulative Cases per 100,000 People {.tabset .tabset-fade .tabset-pills} 
#### Cases
```{r}
state.prev100(current.state)
```


#### Log(Cases)
```{r}
state.lprev100(current.state)
```

###  {.toc-ignore}

[Return to top](#header)
  
### Cumulative Deaths per 100,000 People {.tabset .tabset-fade .tabset-pills}  
#### Deaths 
```{r}
state.death100(current.state.death)
```


#### Log(Deaths)
```{r}
state.ldeath100(current.state.death)
```

###  {.toc-ignore}

[Return to top](#header)

### New Cases per Day {.tabset .tabset-fade .tabset-pills}  
#### New Cases 
```{r}
state.casenew(current.state.new)
```


#### Log(New Cases)
```{r}
state.lcasenew(current.state.new)
```

### {.toc-ignore}

[Return to top](#header)
  

### New Deaths per Day {.tabset .tabset-fade .tabset-pills}  
#### New Deaths 
```{r}
state.deathnew(current.state.newdeath)
```


#### Log(New Deaths)
```{r}
state.ldeathnew(current.state.newdeath)
```

### {.toc-ignore} 


---

## **New Hampshire**  

[Return to top](#header)
```{r }
the.state <- "NH"

current.state <- states.pos %>% 
  filter(state == the.state)

current.state.death <- states.deaths %>% 
    filter(state == the.state)

current.state.new <- states.newcases %>% 
  filter(state == the.state)

current.state.newdeath <- states.newdeaths %>% 
    filter(state == the.state)

```


### Cumulative Cases {.tabset .tabset-fade .tabset-pills}  
#### Prevalence 
```{r }
state.prev(current.state)
```

#### Log(Prevalence)
```{r}
state.lprev(current.state)
```

###  {.toc-ignore}

[Return to top](#header)

### Cumulative Deaths {.tabset .tabset-fade .tabset-pills}  
#### Deaths
```{r}
state.death(current.state.death)
```


#### Log(Deaths)
```{r}
state.ldeath(current.state.death)
```

###  {.toc-ignore}

[Return to top](#header)

  
### Cumulative Cases per 100,000 People {.tabset .tabset-fade .tabset-pills} 
#### Cases
```{r}
state.prev100(current.state)
```


#### Log(Cases)
```{r}
state.lprev100(current.state)
```

###  {.toc-ignore}

[Return to top](#header)
  
### Cumulative Deaths per 100,000 People {.tabset .tabset-fade .tabset-pills}  
#### Deaths 
```{r}
state.death100(current.state.death)
```


#### Log(Deaths)
```{r}
state.ldeath100(current.state.death)
```

###  {.toc-ignore}

[Return to top](#header)

### New Cases per Day {.tabset .tabset-fade .tabset-pills}  
#### New Cases 
```{r}
state.casenew(current.state.new)
```


#### Log(New Cases)
```{r}
state.lcasenew(current.state.new)
```

### {.toc-ignore}

[Return to top](#header)
  

### New Deaths per Day {.tabset .tabset-fade .tabset-pills}  
#### New Deaths 
```{r}
state.deathnew(current.state.newdeath)
```


#### Log(New Deaths)
```{r}
state.ldeathnew(current.state.newdeath)
```

### {.toc-ignore} 


---

## **New Jersey**  

[Return to top](#header)
```{r }
the.state <- "NJ"

current.state <- states.pos %>% 
  filter(state == the.state)

current.state.death <- states.deaths %>% 
    filter(state == the.state)

current.state.new <- states.newcases %>% 
  filter(state == the.state)

current.state.newdeath <- states.newdeaths %>% 
    filter(state == the.state)

```


### Cumulative Cases {.tabset .tabset-fade .tabset-pills}  
#### Prevalence 
```{r }
state.prev(current.state)
```

#### Log(Prevalence)
```{r}
state.lprev(current.state)
```

###  {.toc-ignore}

[Return to top](#header)

### Cumulative Deaths {.tabset .tabset-fade .tabset-pills}  
#### Deaths
```{r}
state.death(current.state.death)
```


#### Log(Deaths)
```{r}
state.ldeath(current.state.death)
```

###  {.toc-ignore}

[Return to top](#header)

  
### Cumulative Cases per 100,000 People {.tabset .tabset-fade .tabset-pills} 
#### Cases
```{r}
state.prev100(current.state)
```


#### Log(Cases)
```{r}
state.lprev100(current.state)
```

###  {.toc-ignore}

[Return to top](#header)
  
### Cumulative Deaths per 100,000 People {.tabset .tabset-fade .tabset-pills}  
#### Deaths 
```{r}
state.death100(current.state.death)
```


#### Log(Deaths)
```{r}
state.ldeath100(current.state.death)
```

###  {.toc-ignore}

[Return to top](#header)

### New Cases per Day {.tabset .tabset-fade .tabset-pills}  
#### New Cases 
```{r}
state.casenew(current.state.new)
```


#### Log(New Cases)
```{r}
state.lcasenew(current.state.new)
```

### {.toc-ignore}

[Return to top](#header)
  

### New Deaths per Day {.tabset .tabset-fade .tabset-pills}  
#### New Deaths 
```{r}
state.deathnew(current.state.newdeath)
```


#### Log(New Deaths)
```{r}
state.ldeathnew(current.state.newdeath)
```

### {.toc-ignore} 


---

## **New York**  

[Return to top](#header)
```{r }
the.state <- "NY"

current.state <- states.pos %>% 
  filter(state == the.state)

current.state.death <- states.deaths %>% 
    filter(state == the.state)

current.state.new <- states.newcases %>% 
  filter(state == the.state)

current.state.newdeath <- states.newdeaths %>% 
    filter(state == the.state)

```


### Cumulative Cases {.tabset .tabset-fade .tabset-pills}  
#### Prevalence 
```{r }
state.prev(current.state)
```

#### Log(Prevalence)
```{r}
state.lprev(current.state)
```

###  {.toc-ignore}

[Return to top](#header)

### Cumulative Deaths {.tabset .tabset-fade .tabset-pills}  
#### Deaths
```{r}
state.death(current.state.death)
```


#### Log(Deaths)
```{r}
state.ldeath(current.state.death)
```

###  {.toc-ignore}

[Return to top](#header)

  
### Cumulative Cases per 100,000 People {.tabset .tabset-fade .tabset-pills} 
#### Cases
```{r}
state.prev100(current.state)
```


#### Log(Cases)
```{r}
state.lprev100(current.state)
```

###  {.toc-ignore}

[Return to top](#header)
  
### Cumulative Deaths per 100,000 People {.tabset .tabset-fade .tabset-pills}  
#### Deaths 
```{r}
state.death100(current.state.death)
```


#### Log(Deaths)
```{r}
state.ldeath100(current.state.death)
```

###  {.toc-ignore}

[Return to top](#header)

### New Cases per Day {.tabset .tabset-fade .tabset-pills}  
#### New Cases 
```{r}
state.casenew(current.state.new)
```


#### Log(New Cases)
```{r}
state.lcasenew(current.state.new)
```

### {.toc-ignore}

[Return to top](#header)
  

### New Deaths per Day {.tabset .tabset-fade .tabset-pills}  
#### New Deaths 
```{r}
state.deathnew(current.state.newdeath)
```


#### Log(New Deaths)
```{r}
state.ldeathnew(current.state.newdeath)
```

### {.toc-ignore} 


---

## **Pennsylvania**  

[Return to top](#header)
```{r }
the.state <- "PA"

current.state <- states.pos %>% 
  filter(state == the.state)

current.state.death <- states.deaths %>% 
    filter(state == the.state)

current.state.new <- states.newcases %>% 
  filter(state == the.state)

current.state.newdeath <- states.newdeaths %>% 
    filter(state == the.state)

```


### Cumulative Cases {.tabset .tabset-fade .tabset-pills}  
#### Prevalence 
```{r }
state.prev(current.state)
```

#### Log(Prevalence)
```{r}
state.lprev(current.state)
```

###  {.toc-ignore}

[Return to top](#header)

### Cumulative Deaths {.tabset .tabset-fade .tabset-pills}  
#### Deaths
```{r}
state.death(current.state.death)
```


#### Log(Deaths)
```{r}
state.ldeath(current.state.death)
```

###  {.toc-ignore}

[Return to top](#header)

  
### Cumulative Cases per 100,000 People {.tabset .tabset-fade .tabset-pills} 
#### Cases
```{r}
state.prev100(current.state)
```


#### Log(Cases)
```{r}
state.lprev100(current.state)
```

###  {.toc-ignore}

[Return to top](#header)
  
### Cumulative Deaths per 100,000 People {.tabset .tabset-fade .tabset-pills}  
#### Deaths 
```{r}
state.death100(current.state.death)
```


#### Log(Deaths)
```{r}
state.ldeath100(current.state.death)
```

###  {.toc-ignore}

[Return to top](#header)

### New Cases per Day {.tabset .tabset-fade .tabset-pills}  
#### New Cases 
```{r}
state.casenew(current.state.new)
```


#### Log(New Cases)
```{r}
state.lcasenew(current.state.new)
```

### {.toc-ignore}

[Return to top](#header)
  

### New Deaths per Day {.tabset .tabset-fade .tabset-pills}  
#### New Deaths 
```{r}
state.deathnew(current.state.newdeath)
```


#### Log(New Deaths)
```{r}
state.ldeathnew(current.state.newdeath)
```

### {.toc-ignore} 


---

## **Rhode Island**  

[Return to top](#header)
```{r }
the.state <- "RI"

current.state <- states.pos %>% 
  filter(state == the.state)

current.state.death <- states.deaths %>% 
    filter(state == the.state)

current.state.new <- states.newcases %>% 
  filter(state == the.state)

current.state.newdeath <- states.newdeaths %>% 
    filter(state == the.state)

```


### Cumulative Cases {.tabset .tabset-fade .tabset-pills}  
#### Prevalence 
```{r }
state.prev(current.state)
```

#### Log(Prevalence)
```{r}
state.lprev(current.state)
```

###  {.toc-ignore}

[Return to top](#header)

### Cumulative Deaths {.tabset .tabset-fade .tabset-pills}  
#### Deaths
```{r}
state.death(current.state.death)
```


#### Log(Deaths)
```{r}
state.ldeath(current.state.death)
```

###  {.toc-ignore}

[Return to top](#header)

  
### Cumulative Cases per 100,000 People {.tabset .tabset-fade .tabset-pills} 
#### Cases
```{r}
state.prev100(current.state)
```


#### Log(Cases)
```{r}
state.lprev100(current.state)
```

###  {.toc-ignore}

[Return to top](#header)
  
### Cumulative Deaths per 100,000 People {.tabset .tabset-fade .tabset-pills}  
#### Deaths 
```{r}
state.death100(current.state.death)
```


#### Log(Deaths)
```{r}
state.ldeath100(current.state.death)
```

###  {.toc-ignore}

[Return to top](#header)

### New Cases per Day {.tabset .tabset-fade .tabset-pills}  
#### New Cases 
```{r}
state.casenew(current.state.new)
```


#### Log(New Cases)
```{r}
state.lcasenew(current.state.new)
```

### {.toc-ignore}

[Return to top](#header)
  

### New Deaths per Day {.tabset .tabset-fade .tabset-pills}  
#### New Deaths 
```{r}
state.deathnew(current.state.newdeath)
```


#### Log(New Deaths)
```{r}
state.ldeathnew(current.state.newdeath)
```

### {.toc-ignore} 


---

## **Vermont**  

[Return to top](#header)
```{r }
the.state <- "VT"

current.state <- states.pos %>% 
  filter(state == the.state)

current.state.death <- states.deaths %>% 
    filter(state == the.state)

current.state.new <- states.newcases %>% 
  filter(state == the.state)

current.state.newdeath <- states.newdeaths %>% 
    filter(state == the.state)

```


### Cumulative Cases {.tabset .tabset-fade .tabset-pills}  
#### Prevalence 
```{r }
state.prev(current.state)
```

#### Log(Prevalence)
```{r}
state.lprev(current.state)
```

###  {.toc-ignore}

[Return to top](#header)

### Cumulative Deaths {.tabset .tabset-fade .tabset-pills}  
#### Deaths
```{r}
state.death(current.state.death)
```


#### Log(Deaths)
```{r}
state.ldeath(current.state.death)
```

###  {.toc-ignore}

[Return to top](#header)

  
### Cumulative Cases per 100,000 People {.tabset .tabset-fade .tabset-pills} 
#### Cases
```{r}
state.prev100(current.state)
```


#### Log(Cases)
```{r}
state.lprev100(current.state)
```

###  {.toc-ignore}

[Return to top](#header)
  
### Cumulative Deaths per 100,000 People {.tabset .tabset-fade .tabset-pills}  
#### Deaths 
```{r}
state.death100(current.state.death)
```


#### Log(Deaths)
```{r}
state.ldeath100(current.state.death)
```

###  {.toc-ignore}

[Return to top](#header)

### New Cases per Day {.tabset .tabset-fade .tabset-pills}  
#### New Cases 
```{r}
state.casenew(current.state.new)
```


#### Log(New Cases)
```{r}
state.lcasenew(current.state.new)
```

### {.toc-ignore}

[Return to top](#header)
  

### New Deaths per Day {.tabset .tabset-fade .tabset-pills}  
#### New Deaths 
```{r}
state.deathnew(current.state.newdeath)
```


#### Log(New Deaths)
```{r}
state.ldeathnew(current.state.newdeath)
```

### {.toc-ignore} 



